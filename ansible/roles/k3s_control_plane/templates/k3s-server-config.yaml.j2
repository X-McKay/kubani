# K3s server configuration
# Generated by Ansible - do not edit manually

# Network configuration
cluster-cidr: {{ cluster_cidr | default('10.42.0.0/16') }}
service-cidr: {{ service_cidr | default('10.43.0.0/16') }}
cluster-dns: {{ cluster_dns | default('10.43.0.10') }}
cluster-domain: {{ cluster_domain | default('cluster.local') }}

# Tailscale integration
tls-san:
  - {{ tailscale_ip }}
node-ip: {{ tailscale_ip }}
advertise-address: {{ tailscale_ip }}
flannel-iface: tailscale0

# API server
write-kubeconfig-mode: "0644"

# Additional server arguments
{% if k3s_server_args is defined and k3s_server_args | length > 0 %}
# Custom server arguments from inventory
{% for arg in k3s_server_args %}
# {{ arg }}
{% endfor %}
{% endif %}
