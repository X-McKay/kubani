# K3s agent configuration
# Generated by Ansible - do not edit manually

# Control plane connection
server: {{ k3s_control_plane_url }}
token: {{ k3s_join_token }}

# Tailscale integration
node-ip: {{ tailscale_ip }}
flannel-iface: tailscale0

# Resource reservations for workstation use
# These ensure local applications have guaranteed resources
kubelet-arg:
  - "kube-reserved=cpu={{ reserved_cpu }},memory={{ reserved_memory }},ephemeral-storage={{ reserved_ephemeral_storage | default(default_reserved_ephemeral_storage) }}"
  - "system-reserved=cpu={{ system_reserved_cpu | default(default_system_reserved_cpu) }},memory={{ system_reserved_memory | default(default_system_reserved_memory) }},ephemeral-storage={{ system_reserved_ephemeral_storage | default(default_system_reserved_ephemeral_storage) }}"

# Additional agent arguments
{% if k3s_agent_args is defined and k3s_agent_args | length > 0 %}
# Custom agent arguments from inventory
{% for arg in k3s_agent_args %}
# {{ arg }}
{% endfor %}
{% endif %}
