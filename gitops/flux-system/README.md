# Flux System

This directory contains Flux CD system components and configuration.

## Files

- `gotk-components.yaml` - Flux controllers and CRDs (auto-generated by Flux bootstrap)
- `gotk-sync.yaml` - GitRepository and Kustomization for syncing this repository
- `kustomization.yaml` - Kustomize configuration for Flux system

## Bootstrap

To bootstrap Flux to your cluster, run:

```bash
flux bootstrap git \
  --url=ssh://git@github.com/your-org/your-repo \
  --branch=main \
  --path=./gitops \
  --private-key-file=~/.ssh/id_rsa
```

Or with HTTPS and token:

```bash
flux bootstrap git \
  --url=https://github.com/your-org/your-repo \
  --branch=main \
  --path=./gitops \
  --token-auth \
  --password=$GITHUB_TOKEN
```

## Important Notes

- The `gotk-components.yaml` file is auto-generated and should not be edited manually
- The `gotk-sync.yaml` file is auto-generated but can be customized after bootstrap
- After bootstrap, Flux will manage itself and sync from this repository

## Verification

Check Flux installation:

```bash
flux check
```

View Flux resources:

```bash
flux get sources git
flux get kustomizations
```

View Flux logs:

```bash
flux logs --all-namespaces
```
